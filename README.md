Basic implementation of a state machine
Notice that these states were hardcoded to speed up the process but they will need to be refactored using the State machine design pattern in order to allow for reusability of the code 
